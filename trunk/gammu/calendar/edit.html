<style>
	#divEdit		{
				position:		absolute;
				top:			250px;
				left:			350px;
				border:			1px solid black;
				background-color:	#bfbfbf;
				opacity:		0;
				visibility:		hidden;
				}

	#divEdit table		{
				font-size:	12pt;
				padding:	5px;
				spacing:	2px;
				}

	#divEdit input		{
				border:		1px solid gray;
				font-size:	12pt;
				text-align:	center;
				}
	#divEdit input.datetime	{
				width:		200px;
				}
	#divEdit input.summary	{
				width:		450px;
				}

	#divEdit input.button	{
				font-size:	12pt;
				text-align:	center;
				width:		80px;
				}
	#divEdit input.button:hover	{
				border:			1px solid #485879;
				background-color:	#8a8ae9;
				}

	img.close		{
				background-color:	white;
				cursor:			pointer;
				}
</style>

<div id=divEdit>
	<form action=save method=GET>
		<input type=hidden name=id id=edit_id value=''/>

		<table>
			<tr>
				<td colspan=2 align=right>
					<a href="javascript:FadeOut('divEdit',1);">
					<img class=close src="static/close.png" width=20 height=20 />
					</a>
				</td>
			</tr>
			<tr>
				<td>Start:</td>
				<td>
					<input type=text name=startdate id=edit_startdate class=datetime />
					<input type=text name=starttime id=edit_starttime class=datetime />
				</td>
			</tr>
			<tr>
				<td>End:</td>
				<td>
					<input type=text name=enddate id=edit_enddate class=datetime />
					<input type=text name=endtime id=edit_endtime class=datetime />
				</td>
			</tr>
			<tr>
				<td>Summary:</td>
				<td colspan=2><input type=text name=summary id=edit_summary class=summary /></td>
			</tr>
			<tr>
				<td>
					<input type=button class=button id=DeleteButton value=Delete onClick="DeleteEvent();"/>
				</td>
				<td align=right>
					<input type=submit class=button value=Save />
					<input type=button class=button value=Cancel onClick="FadeOut('divEdit',1);"/>
				</td>
			</tr>
		</table>
	</form>
</div>

<script>
	function Edit( id, startdate, starttime, enddate, endtime, summary ) {
		document.getElementById('edit_id').value = id;
		document.getElementById('edit_startdate').value = startdate;
		document.getElementById('edit_starttime').value = starttime;
		document.getElementById('edit_enddate').value = enddate;
		document.getElementById('edit_endtime').value = endtime;
		document.getElementById('edit_summary').value = summary;
		document.getElementById('DeleteButton').style.visibility = "visible";
		FadeIn('divEdit', 0);
		}

	function NewEvent() {
		document.getElementById('edit_id').value = 'new';
		document.getElementById('edit_startdate').value = "";
		document.getElementById('edit_starttime').value = "";
		document.getElementById('edit_enddate').value = "";
		document.getElementById('edit_endtime').value = "";
		document.getElementById('edit_summary').value = "";
		document.getElementById('DeleteButton').style.visibility = "hidden";
		FadeIn('divEdit', 0);
		document.getElementById('edit_start').focus();
		}

	function DeleteEvent() {
		summary = document.getElementById('edit_summary').value;
		if (confirm('Really delete event "'+summary+'" ?')) {
			FadeOut('divEdit',1);
			id = document.getElementById('edit_id').value;
			window.location.href = "delete?id="+id;
			}
		}

	document.onkeydown = function(evt) {
	    evt = evt || window.event;
	    if (evt.keyCode == 27) {
		FadeOut('divEdit',1);
	    }
	};
</script>

